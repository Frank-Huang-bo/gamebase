webpackJsonp([1],{"0QnA":function(t,a){},"3LRx":function(t,a){},"6hni":function(t,a){},NHnr:function(t,a,s){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e=s("7+uW"),i=s("NYxO"),r=s("mtWM"),o=s.n(r),n=s("Rf8U"),l=s.n(n),c=s("ZZvs"),d=s.n(c),u=(s("SYh3"),s("K3J8"),s("sUu7")),v=s("1SbN"),p=s.n(v),m={render:function(){var t=this.$createElement,a=this._self._c||t;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},staticRenderFns:[]};var _=s("VU/8")({name:"App",created:function(){this.$http.get()}},m,!1,function(t){s("XtTU")},null,null).exports,h=s("/ocq"),g={name:"HelloWorld",data:function(){return{user:{username:"",password:""}}},methods:{signin:function(){var t=this;this.$http.post("https://vue-course-api.hexschool.io/admin/signin",t.user).then(function(a){console.log(a.data),a.data.success&&t.$router.push("/admin/dashboard")})}}},f={render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[s("div",{staticClass:"wrap"},[s("main",[s("div",{staticClass:"login-panel"}),t._v(" "),s("div",{staticClass:"login-form p-5"},[s("h1",[t._v("GameBase Manage Login")]),t._v(" "),s("form",{on:{submit:function(a){return a.preventDefault(),t.signin(a)}}},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"exampleInputEmail1"}},[t._v("email")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.user.username,expression:"user.username"}],staticClass:"form-control",attrs:{id:"exampleInputEmail1","aria-describedby":"emailHelp",placeholder:"Enter email",type:"email"},domProps:{value:t.user.username},on:{input:function(a){a.target.composing||t.$set(t.user,"username",a.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"exampleInputPassword1"}},[t._v("密碼")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password,expression:"user.password"}],staticClass:"form-control",attrs:{id:"exampleInputPassword1",placeholder:"Password",type:"password"},domProps:{value:t.user.password},on:{input:function(a){a.target.composing||t.$set(t.user,"password",a.target.value)}}})]),t._v(" "),s("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t._v("登入")])])])])])])},staticRenderFns:[]};var C=s("VU/8")(g,f,!1,function(t){s("iQ74")},"data-v-4ee04ab3",null).exports,b={render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[s("div",{staticClass:"admin sidebar"},[s("div",{staticClass:"logo d-flex justify-content-center align-items-center"},[s("router-link",{attrs:{to:"/admin/dashboard"}},[s("h1",{staticClass:"h5"},[t._v("GameBase Manage")])])],1),t._v(" "),s("ul",{staticClass:"nav flex-column mt-3"},[s("li",{staticClass:"nav-item mb-3"},[s("router-link",{staticClass:"nav-link active",attrs:{to:"/admin/dashboard"}},[s("i",{staticClass:"fas fa-home"}),t._v("\n                    dashboard\n                ")])],1),t._v(" "),s("li",{staticClass:"nav-item mb-3"},[s("router-link",{staticClass:"nav-link",attrs:{to:"/admin/products"}},[s("i",{staticClass:"fas fa-box-open"}),t._v("\n                    產品列表\n                ")])],1),t._v(" "),s("li",{staticClass:"nav-item mb-3"},[s("router-link",{staticClass:"nav-link",attrs:{to:"/admin/orders"}},[s("i",{staticClass:"fas fa-clipboard-list"}),t._v("\n                    訂單列表\n                ")])],1),t._v(" "),s("li",{staticClass:"nav-item mb-3"},[s("router-link",{staticClass:"nav-link",attrs:{to:"/admin/coupon"}},[s("i",{staticClass:"fas fa-ticket-alt"}),t._v("\n                    優惠券\n                ")])],1)])])])},staticRenderFns:[]},y={render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[s("div",{staticClass:"topbar"},[t._m(0),t._v(" "),s("div",{staticClass:"toolbar ml-auto"},[s("a",{attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.signout(a)}}},[s("i",{staticClass:"fas fa-sign-out-alt"})])])])])},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"login-info"},[a("span")])}]},x={name:"Navbar",data:function(){return{messages:[]}},methods:{updateMessage:function(t,a){var s=Math.floor(new Date/1e3);this.messages.push({message:t,status:a,timestamp:s}),this.removeMessageWithTiming(s)},removeMessage:function(t){this.messages.splice(t,1)},removeMessageWithTiming:function(t){var a=this;setTimeout(function(){a.messages.forEach(function(s,e){s.timestamp===t&&a.messages.splice(e,1)})},5e3)}},created:function(){var t=this;t.$bus.$on("message:push",function(a){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"warning";t.updateMessage(a,s)})}},w={render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"message-alert"},t._l(t.messages,function(a,e){return s("div",{key:e,staticClass:"alert alert-dismissible",class:"alert-"+a.status},[t._v("\n        "+t._s(a.message)+"\n        "),s("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:function(a){t.removeMessage(e)}}},[s("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])}))},staticRenderFns:[]};var k={components:{Sidebar:s("VU/8")({data:function(){return{}}},b,!1,null,null,null).exports,Topbar:s("VU/8")({methods:{signout:function(){var t=this;this.$http.post("https://vue-course-api.hexschool.io/logout").then(function(a){a.data.success&&t.$router.push("/login")})}}},y,!1,null,null,null).exports,Alert:s("VU/8")(x,w,!1,function(t){s("6hni")},null,null).exports}},P={render:function(){var t=this.$createElement,a=this._self._c||t;return a("div",[a("div",{staticClass:"wrap"},[a("header",[a("Sidebar")],1),this._v(" "),a("main",{staticClass:"main"},[a("Topbar"),this._v(" "),a("div",{staticClass:"content"},[a("Alert"),this._v(" "),a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"bg-white px-5 py-3 my-4"},[a("router-view")],1)])])])],1)],1)])])},staticRenderFns:[]};var j=s("VU/8")(k,P,!1,function(t){s("3LRx")},null,null).exports,$={data:function(){return{products:[],tempProduct:{},pagination:{},isNew:!1,isLoading:!1,status:{fileUploading:!1}}},methods:{getOrders:function(){var t="https://vue-course-api.hexschool.io/api/cos214159/admin/orders?page="+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1),a=this;a.isLoading=!0,this.$http.get(t).then(function(t){console.log(t.data),a.isLoading=!1,a.orders=t.data.orders,a.pagination=t.data.pagination})},getProducts:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t=this;t.isLoading=!0,this.$http.get("https://vue-course-api.hexschool.io/api/cos214159/products/all").then(function(a){t.isLoading=!1,t.products=a.data.products,t.pagination=a.data.pagination})}},created:function(){this.getProducts()}},D={render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[s("loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}}),t._v(" "),s("nav",{attrs:{"aria-label":"breadcrumb"}},[s("ol",{staticClass:"breadcrumb"},[s("li",{staticClass:"breadcrumb-item"},[s("router-link",{attrs:{to:"/admin/dashboard"}},[t._v("首頁")])],1),t._v(" "),s("li",{staticClass:"breadcrumb-item active",attrs:{"aria-current":"page"}},[t._v("Dashboard")])])]),t._v(" "),s("div",{staticClass:"container"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-4 "},[s("div",{staticClass:"card"},[s("div",{staticClass:"card-header bg-info text-white font-weight-bold"},[t._v("\n                        產品資料\n                    ")]),t._v(" "),s("div",{staticClass:"card-body"},[s("p",{staticClass:"mb-0"},[t._v("產品筆數 : "+t._s(t.products.length)+" ")])])])]),t._v(" "),s("div",{staticClass:"col-md-4"})])])],1)},staticRenderFns:[]},L=s("VU/8")($,D,!1,null,null,null).exports,M=s("woOf"),N=s.n(M),q=s("7t+N"),E=s.n(q),O={render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[s("nav",{attrs:{"aria-label":"Page navigation example"}},[s("ul",{staticClass:"pagination justify-content-center"},[s("li",{staticClass:"page-item",class:{disabled:!t.pagination.has_pre}},[s("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(a){a.preventDefault(),t.getProducts(t.pagination.current_page-1)}}},[t._v("«")])]),t._v(" "),t._l(t.pagination.total_pages,function(a){return s("li",{key:a,staticClass:"page-item",class:{active:a===t.pagination.current_page}},[s("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(s){s.preventDefault(),t.getProducts(a)}}},[t._v(t._s(a))])])}),t._v(" "),s("li",{staticClass:"page-item",class:{disabled:!t.pagination.has_next}},[s("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(a){a.preventDefault(),t.getProducts(t.pagination.current_page+1)}}},[t._v("»")])])],2)])])},staticRenderFns:[]},F=s("VU/8")({data:function(){return{}},props:["pagination"],methods:{getProducts:function(t){this.$emit("acceptGetProducts",t)}}},O,!1,null,null,null).exports,U={data:function(){return{products:[],tempProduct:{},pagination:{},isNew:!1,isLoading:!1,status:{fileUploading:!1}}},components:{Pagination:F},methods:{getProducts:function(){var t="https://vue-course-api.hexschool.io/api/cos214159/admin/products?page="+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1),a=this;a.isLoading=!0,this.$http.get(t).then(function(t){console.log(t.data),a.isLoading=!1,a.products=t.data.products,a.pagination=t.data.pagination})},openModal:function(t,a){t?(this.tempProduct={},this.isNew=!0):(this.tempProduct=N()({},a),this.isNew=!1),E()("#productModal").modal("show")},openDeleteModal:function(t){this.tempProduct=t,E()("#delProductModal").modal("show")},updateProduct:function(){var t=this,a="https://vue-course-api.hexschool.io/api/cos214159/admin/product",s="post",e=this;e.isNew||(s="put",a="https://vue-course-api.hexschool.io/api/cos214159/admin/product/"+e.tempProduct.id),this.$validator.validate().then(function(i){i&&t.$http[s](a,{data:e.tempProduct}).then(function(t){t.data.success?(E()("#productModal").modal("hide"),e.getProducts()):console.log("新增失敗")})})},deleteProduct:function(){var t=this,a="https://vue-course-api.hexschool.io/api/cos214159/admin/product/"+t.tempProduct.id;this.$http.delete(a).then(function(a){E()("#delProductModal").modal("hide"),t.getProducts()})},uploadFile:function(){var t=this,a=this.$refs.files.files[0],s=this,e=new FormData;e.append("file-to-upload",a);s.status.fileUploading=!0,this.$http.post("https://vue-course-api.hexschool.io/api/cos214159/admin/upload",e,{headers:{"Content-type":"multipart/form-data"}}).then(function(a){console.log(a.data),s.status.fileUploading=!1,a.data.success?s.$set(s.tempProduct,"imageUrl",a.data.imageUrl):t.$bus.$emit("message:push",a.data.message,"danger"),console.log(a.data)})}},created:function(){this.getProducts()}},S={render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[s("loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}}),t._v(" "),s("nav",{attrs:{"aria-label":"breadcrumb"}},[s("ol",{staticClass:"breadcrumb"},[s("li",{staticClass:"breadcrumb-item"},[s("router-link",{attrs:{to:"/admin/dashboard"}},[t._v("首頁")])],1),t._v(" "),s("li",{staticClass:"breadcrumb-item active",attrs:{"aria-current":"page"}},[t._v("產品列表")])])]),t._v(" "),s("div",{staticClass:"text-right"},[s("button",{staticClass:"btn btn-primary",on:{click:function(a){t.openModal(!0)}}},[t._v("建立新的產品")])]),t._v(" "),s("table",{staticClass:"table mt-4"},[t._m(0),t._v(" "),s("tbody",t._l(t.products,function(a){return s("tr",{key:a.id},[s("td",[t._v(t._s(a.category))]),t._v(" "),s("td",[t._v(" "+t._s(a.title)+" ")]),t._v(" "),s("td",{staticClass:"text-right"},[t._v(" "+t._s(t._f("currency")(a.origin_price))+" ")]),t._v(" "),s("td",{staticClass:"text-right"},[t._v(" "+t._s(t._f("currency")(a.price))+" ")]),t._v(" "),s("td",[a.is_enabled?s("span",{staticClass:"text-success"},[t._v("啟用")]):s("span",[t._v("未啟用")])]),t._v(" "),s("td",[s("div",{staticClass:"btn-group btn-group-sm",attrs:{role:"group","aria-label":"Basic example"}},[s("button",{staticClass:"btn btn-outline-primary",on:{click:function(s){t.openModal(!1,a)}}},[t._v("編輯")]),t._v(" "),s("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button"},on:{click:function(s){t.openDeleteModal(a)}}},[t._v("刪除")])])])])}))]),t._v(" "),s("Pagination",{attrs:{pagination:t.pagination},on:{acceptGetProducts:t.getProducts}}),t._v(" "),s("div",{staticClass:"modal fade",attrs:{id:"productModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[s("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[s("div",{staticClass:"modal-content border-0"},[s("div",{staticClass:"modal-header bg-dark text-white"},[s("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t.isNew?s("span",[t._v("新增產品")]):s("span",[t._v("編輯產品 - "+t._s(t.tempProduct.title))])]),t._v(" "),t._m(1)]),t._v(" "),s("div",{staticClass:"modal-body"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-sm-4"},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"image"}},[t._v("輸入圖片網址")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.imageUrl,expression:"tempProduct.imageUrl"}],staticClass:"form-control",attrs:{type:"text",id:"image",placeholder:"請輸入圖片連結"},domProps:{value:t.tempProduct.imageUrl},on:{input:function(a){a.target.composing||t.$set(t.tempProduct,"imageUrl",a.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"customFile"}},[t._v("或 上傳圖片\n                                    "),t.status.fileUploading?s("i",{staticClass:"fas fa-spinner fa-spin"}):t._e()]),t._v(" "),s("div",{staticClass:"custom-file"},[s("input",{ref:"files",staticClass:"custom-file-input",attrs:{type:"file",id:"customFile"},on:{change:t.uploadFile}}),t._v(" "),s("label",{staticClass:"custom-file-label",attrs:{for:"inputGroupFile01"}},[t._v("Choose file")])])]),t._v(" "),s("img",{staticClass:"img-fluid",attrs:{src:t.tempProduct.imageUrl,alt:""},model:{value:t.tempProduct.imageUrl,callback:function(a){t.$set(t.tempProduct,"imageUrl",a)},expression:"tempProduct.imageUrl"}})]),t._v(" "),s("div",{staticClass:"col-sm-8"},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"title"}},[t._v("標題")]),t._v(" "),s("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.tempProduct.title,expression:"tempProduct.title"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("title")},attrs:{type:"text",name:"title",id:"title",placeholder:"請輸入標題"},domProps:{value:t.tempProduct.title},on:{input:function(a){a.target.composing||t.$set(t.tempProduct,"title",a.target.value)}}}),t._v(" "),t.errors.has("title")?s("span",{staticClass:"text-danger"},[t._v("\n                                    請輸入標題\n                                ")]):t._e()]),t._v(" "),s("div",{staticClass:"form-row"},[s("div",{staticClass:"form-group col-md-6"},[s("label",{attrs:{for:"category"}},[t._v("分類")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.category,expression:"tempProduct.category"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("category")},attrs:{type:"text",name:"category",id:"category",placeholder:"請輸入分類"},domProps:{value:t.tempProduct.category},on:{input:function(a){a.target.composing||t.$set(t.tempProduct,"category",a.target.value)}}}),t._v(" "),t.errors.has("category")?s("span",{staticClass:"text-danger"},[t._v("\n                                        請輸入分類\n                                    ")]):t._e()]),t._v(" "),s("div",{staticClass:"form-group col-md-6"},[s("label",{attrs:{for:"unit"}},[t._v("單位")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.unit,expression:"tempProduct.unit"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("unit")},attrs:{type:"text",name:"unit",id:"unit",placeholder:"請輸入單位"},domProps:{value:t.tempProduct.unit},on:{input:function(a){a.target.composing||t.$set(t.tempProduct,"unit",a.target.value)}}}),t._v(" "),t.errors.has("unit")?s("span",{staticClass:"text-danger"},[t._v("\n                                        請輸入單位\n                                    ")]):t._e()])]),t._v(" "),s("div",{staticClass:"form-row"},[s("div",{staticClass:"form-group col-md-6"},[s("label",{attrs:{for:"origin_price"}},[t._v("原價")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.origin_price,expression:"tempProduct.origin_price"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("origin_price")},attrs:{type:"number",name:"origin_price",id:"origin_price",placeholder:"請輸入原價"},domProps:{value:t.tempProduct.origin_price},on:{input:function(a){a.target.composing||t.$set(t.tempProduct,"origin_price",a.target.value)}}}),t._v(" "),t.errors.has("origin_price")?s("span",{staticClass:"text-danger"},[t._v("\n                                        請輸入原價\n                                    ")]):t._e()]),t._v(" "),s("div",{staticClass:"form-group col-md-6"},[s("label",{attrs:{for:"price"}},[t._v("售價")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.price,expression:"tempProduct.price"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("price")},attrs:{type:"number",name:"price",id:"price",placeholder:"請輸入售價"},domProps:{value:t.tempProduct.price},on:{input:function(a){a.target.composing||t.$set(t.tempProduct,"price",a.target.value)}}}),t._v(" "),t.errors.has("price")?s("span",{staticClass:"text-danger"},[t._v("\n                                        請輸入售價\n                                    ")]):t._e()])]),t._v(" "),s("hr"),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"description"}},[t._v("產品描述")]),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.description,expression:"tempProduct.description"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("description")},attrs:{type:"text",name:"description",id:"description",placeholder:"請輸入產品描述"},domProps:{value:t.tempProduct.description},on:{input:function(a){a.target.composing||t.$set(t.tempProduct,"description",a.target.value)}}}),t._v(" "),t.errors.has("description")?s("span",{staticClass:"text-danger"},[t._v("\n                                    請輸入產品描述\n                                ")]):t._e()]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"content"}},[t._v("說明內容")]),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.content,expression:"tempProduct.content"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("content")},attrs:{type:"text",name:"content",id:"content",placeholder:"請輸入產品說明內容"},domProps:{value:t.tempProduct.content},on:{input:function(a){a.target.composing||t.$set(t.tempProduct,"content",a.target.value)}}}),t._v(" "),t.errors.has("content")?s("span",{staticClass:"text-danger"},[t._v("\n                                    請輸入說明內容\n                                ")]):t._e()]),t._v(" "),s("div",{staticClass:"form-group"},[s("div",{staticClass:"form-check"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.is_enabled,expression:"tempProduct.is_enabled"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"is_enabled","true-value":1,"false-value":0},domProps:{checked:Array.isArray(t.tempProduct.is_enabled)?t._i(t.tempProduct.is_enabled,null)>-1:t._q(t.tempProduct.is_enabled,1)},on:{change:function(a){var s=t.tempProduct.is_enabled,e=a.target,i=e.checked?1:0;if(Array.isArray(s)){var r=t._i(s,null);e.checked?r<0&&t.$set(t.tempProduct,"is_enabled",s.concat([null])):r>-1&&t.$set(t.tempProduct,"is_enabled",s.slice(0,r).concat(s.slice(r+1)))}else t.$set(t.tempProduct,"is_enabled",i)}}}),t._v(" "),s("label",{staticClass:"form-check-label",attrs:{for:"is_enabled"}},[t._v("\n                                        是否啟用\n                                    ")])])])])])]),t._v(" "),s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("取消")]),t._v(" "),s("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.updateProduct}},[t._v("確認")])])])])]),t._v(" "),s("div",{staticClass:"modal fade",attrs:{id:"delProductModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[s("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[s("div",{staticClass:"modal-content border-0"},[s("div",{staticClass:"modal-header bg-danger text-white"},[s("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[s("span",[t._v("刪除產品 - "+t._s(t.tempProduct.title)+" ")])]),t._v(" "),t._m(2)]),t._v(" "),s("div",{staticClass:"modal-body"},[t._v("\n                    是否刪除 "),s("strong",{staticClass:"text-danger"},[t._v(t._s(t.tempProduct.title))]),t._v(" 商品(刪除後將無法恢復)。\n                ")]),t._v(" "),s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("取消")]),t._v(" "),s("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(a){return a.preventDefault(),t.deleteProduct(a)}}},[t._v("確認刪除")])])])])])],1)},staticRenderFns:[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("thead",[s("tr",[s("th",{attrs:{width:"120"}},[t._v("分類")]),t._v(" "),s("th",[t._v("產品名稱")]),t._v(" "),s("th",{attrs:{width:"120"}},[t._v("原價")]),t._v(" "),s("th",{attrs:{width:"120"}},[t._v("售價")]),t._v(" "),s("th",{attrs:{width:"100"}},[t._v("是否啟用")]),t._v(" "),s("th",{attrs:{width:"80"}},[t._v("編輯")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])}]},R=s("VU/8")(U,S,!1,null,null,null).exports,A={name:"Coupons",data:function(){return{orders:[],pagination:{},isLoading:!1}},methods:{getOrders:function(){var t="https://vue-course-api.hexschool.io/api/cos214159/admin/orders?page="+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1),a=this;a.isLoading=!0,this.$http.get(t).then(function(t){console.log(t.data),a.isLoading=!1,a.orders=t.data.orders,a.pagination=t.data.pagination})},dateFormat:function(t){var a=new Date(1e3*t);return a.getFullYear()+"/"+(a.getMonth()+1)+"/"+a.getDate()}},created:function(){this.getOrders()}},I={render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[s("loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}}),t._v(" "),s("nav",{attrs:{"aria-label":"breadcrumb"}},[s("ol",{staticClass:"breadcrumb"},[s("li",{staticClass:"breadcrumb-item"},[s("router-link",{attrs:{to:"/admin/dashboard"}},[t._v("首頁")])],1),t._v(" "),s("li",{staticClass:"breadcrumb-item active",attrs:{"aria-current":"page"}},[t._v("訂單列表")])])]),t._v(" "),s("table",{staticClass:"table mt-4"},[t._m(0),t._v(" "),s("tbody",t._l(t.orders,function(a){return s("tr",{key:a.id},[s("td",[t._v(t._s(t.dateFormat(a.create_at)))]),t._v(" "),s("td",[t._v(t._s(a.user.email))]),t._v(" "),s("td",[t._v(t._s(a.user.email))]),t._v(" "),s("td",[t._v(t._s(a.total))]),t._v(" "),s("td",[a.is_paid?s("span",{staticClass:"text-success"},[t._v("已付款")]):s("span",[t._v("尚未付款")])]),t._v(" "),t._m(1,!0)])}))]),t._v(" "),s("nav",{attrs:{"aria-label":"Page navigation example"}},[s("ul",{staticClass:"pagination justify-content-center"},[s("li",{staticClass:"page-item",class:{disabled:!t.pagination.has_pre}},[s("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(a){a.preventDefault(),t.getOrders(t.pagination.current_page-1)}}},[t._v("«")])]),t._v(" "),t._l(t.pagination.total_pages,function(a){return s("li",{key:a,staticClass:"page-item",class:{active:a===t.pagination.current_page}},[s("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(s){s.preventDefault(),t.getOrders(a)}}},[t._v(t._s(a))])])}),t._v(" "),s("li",{staticClass:"page-item",class:{disabled:!t.pagination.has_next}},[s("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(a){a.preventDefault(),t.getOrders(t.pagination.current_page+1)}}},[t._v("»")])])],2)])],1)},staticRenderFns:[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("thead",[s("tr",[s("th",{attrs:{width:"120"}},[t._v("購買時間")]),t._v(" "),s("th",{attrs:{width:"120"}},[t._v("Email")]),t._v(" "),s("th",[t._v("購買款項")]),t._v(" "),s("th",{attrs:{width:"120"}},[t._v("應付金額")]),t._v(" "),s("th",{attrs:{width:"120"}},[t._v("是否付款")]),t._v(" "),s("th",{attrs:{width:"80"}},[t._v("編輯")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("td",[a("button",{staticClass:"btn btn-outline-primary btn-sm",attrs:{type:"button","data-dismiss":"modal"}},[this._v("編輯")])])}]},z=s("VU/8")(A,I,!1,null,null,null).exports,T=s("IC97"),V=s("D52M"),G=s("PJh5"),H={data:function(){return{coupons:[],tempCoupon:{},pagination:{},isNew:!1,isLoading:!1,zh:V.a,format:"yyyy/MM/dd",date:new Date(2015,6,12)}},components:{Pagination:F,Datepicker:T.a},methods:{dateFormat:function(t){var a=new Date(1e3*t);return a.getFullYear()+"/"+(a.getMonth()+1)+"/"+a.getDate()},getDateByTimestamp:function(t){if(null==t)return"";var a=new Date(1e3*t),s=a.getFullYear(),e=a.getMonth(),i=a.getDate();return new Date(s,e,i)},getDate:function(){return new Date(2016,9,16)},getCoupons:function(){var t="https://vue-course-api.hexschool.io/api/cos214159/admin/coupons?page="+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1),a=this;a.isLoading=!0,this.$http.get(t).then(function(t){a.isLoading=!1,a.coupons=t.data.coupons,a.pagination=t.data.pagination})},openModal:function(t,a){t?(this.tempCoupon={},this.isNew=!0):(this.tempCoupon=N()({},a),this.tempCoupon.tempDate=this.getDateByTimestamp(this.tempCoupon.due_date),this.isNew=!1),E()("#couponModal").modal("show")},openDeleteModal:function(t){this.tempCoupon=t,E()("#delCouponModal").modal("show")},updateCoupon:function(){var t=this,a="https://vue-course-api.hexschool.io/api/cos214159/admin/coupon",s="post",e=this;e.isNew||(s="put",a="https://vue-course-api.hexschool.io/api/cos214159/admin/coupon/"+e.tempCoupon.id),e.tempCoupon.due_date=new Date(e.tempCoupon.tempDate).getTime()/1e3,console.log(e.tempCoupon.due_date),this.$validator.validate().then(function(i){i&&t.$http[s](a,{data:e.tempCoupon}).then(function(t){console.log(t.data),t.data.success?(E()("#couponModal").modal("hide"),e.getCoupons()):console.log("新增失敗")})})},deleteProduct:function(){var t=this,a="https://vue-course-api.hexschool.io/api/cos214159/admin/coupon/"+t.tempCoupon.id;this.$http.delete(a).then(function(a){E()("#delCouponModal").modal("hide"),t.getCoupons()})},customFormatter:function(t){return G(t).format("MMMM Do YYYY, h:mm:ss a")}},created:function(){this.getCoupons()}},B={render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[s("loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}}),t._v(" "),s("nav",{attrs:{"aria-label":"breadcrumb"}},[s("ol",{staticClass:"breadcrumb"},[s("li",{staticClass:"breadcrumb-item"},[s("router-link",{attrs:{to:"/admin/dashboard"}},[t._v("首頁")])],1),t._v(" "),s("li",{staticClass:"breadcrumb-item active",attrs:{"aria-current":"page"}},[t._v("優惠券管理")])])]),t._v(" "),s("div",{staticClass:"text-right"},[s("button",{staticClass:"btn btn-primary",on:{click:function(a){t.openModal(!0)}}},[t._v("建立新的優惠券")])]),t._v(" "),s("table",{staticClass:"table mt-4"},[t._m(0),t._v(" "),s("tbody",t._l(t.coupons,function(a){return s("tr",{key:a.id},[s("td",[t._v(t._s(a.title))]),t._v(" "),s("td",[t._v(t._s(a.percent))]),t._v(" "),s("td",[t._v("\n                    "+t._s(t.dateFormat(a.due_date))+"\n                ")]),t._v(" "),s("td",[a.is_enabled?s("span",{staticClass:"text-success"},[t._v("啟用")]):s("span",[t._v("未啟用")])]),t._v(" "),s("td",[s("div",{staticClass:"btn-group btn-group-sm",attrs:{role:"group","aria-label":"Basic example"}},[s("button",{staticClass:"btn btn-outline-primary",on:{click:function(s){t.openModal(!1,a)}}},[t._v("編輯")]),t._v(" "),s("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button"},on:{click:function(s){t.openDeleteModal(a)}}},[t._v("刪除")])])])])}))]),t._v(" "),s("nav",{attrs:{"aria-label":"Page navigation example"}},[s("ul",{staticClass:"pagination justify-content-center"},[s("li",{staticClass:"page-item",class:{disabled:!t.pagination.has_pre}},[s("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(a){a.preventDefault(),t.getCoupons(t.pagination.current_page-1)}}},[t._v("«")])]),t._v(" "),t._l(t.pagination.total_pages,function(a){return s("li",{key:a,staticClass:"page-item",class:{active:a===t.pagination.current_page}},[s("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(s){s.preventDefault(),t.getCoupons(a)}}},[t._v(t._s(a))])])}),t._v(" "),s("li",{staticClass:"page-item",class:{disabled:!t.pagination.has_next}},[s("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(a){a.preventDefault(),t.getCoupons(t.pagination.current_page+1)}}},[t._v("»")])])],2)]),t._v(" "),s("div",{staticClass:"modal fade",attrs:{id:"couponModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[s("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[s("div",{staticClass:"modal-content border-0"},[s("div",{staticClass:"modal-header bg-dark text-white"},[s("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t.isNew?s("span",[t._v("新增優惠券")]):s("span",[t._v("編輯優惠券 - "+t._s(t.tempCoupon.title))])]),t._v(" "),t._m(1)]),t._v(" "),s("div",{staticClass:"modal-body"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-sm-12"},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"title"}},[t._v("標題")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCoupon.title,expression:"tempCoupon.title"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("title")},attrs:{type:"text",name:"title",id:"title",placeholder:"請輸入標題"},domProps:{value:t.tempCoupon.title},on:{input:function(a){a.target.composing||t.$set(t.tempCoupon,"title",a.target.value)}}}),t._v(" "),t.errors.has("title")?s("span",{staticClass:"text-danger"},[t._v("\n                                    請輸入標題\n                                ")]):t._e()]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"title"}},[t._v("優惠碼")]),t._v(" "),s("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.tempCoupon.code,expression:"tempCoupon.code"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("code")},attrs:{type:"text",name:"code",id:"title",placeholder:"請輸入優惠碼"},domProps:{value:t.tempCoupon.code},on:{input:function(a){a.target.composing||t.$set(t.tempCoupon,"code",a.target.value)}}}),t._v(" "),t.errors.has("code")?s("span",{staticClass:"text-danger"},[t._v("\n                                    請輸入優惠碼\n                                ")]):t._e()]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"due_date"}},[t._v("到期日")]),t._v(" "),s("Datepicker",{attrs:{"bootstrap-styling":!0,language:t.zh,format:t.format},model:{value:t.tempCoupon.tempDate,callback:function(a){t.$set(t.tempCoupon,"tempDate",a)},expression:"tempCoupon.tempDate"}},[t._v(" --\x3e\n                                ")])],1),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"percent"}},[t._v("折扣百分比")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCoupon.percent,expression:"tempCoupon.percent"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("percent")},attrs:{type:"number",name:"percent",id:"percent",placeholder:"",placeholder:"請輸入優惠碼"},domProps:{value:t.tempCoupon.percent},on:{input:function(a){a.target.composing||t.$set(t.tempCoupon,"percent",a.target.value)}}}),t._v(" "),t.errors.has("percent")?s("span",{staticClass:"text-danger"},[t._v("\n                                    請輸入折扣百分比\n                                ")]):t._e()]),t._v(" "),s("div",{staticClass:"form-group"},[s("div",{staticClass:"form-check"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCoupon.is_enabled,expression:"tempCoupon.is_enabled"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"is_enabled","true-value":1,"false-value":0},domProps:{checked:Array.isArray(t.tempCoupon.is_enabled)?t._i(t.tempCoupon.is_enabled,null)>-1:t._q(t.tempCoupon.is_enabled,1)},on:{change:function(a){var s=t.tempCoupon.is_enabled,e=a.target,i=e.checked?1:0;if(Array.isArray(s)){var r=t._i(s,null);e.checked?r<0&&t.$set(t.tempCoupon,"is_enabled",s.concat([null])):r>-1&&t.$set(t.tempCoupon,"is_enabled",s.slice(0,r).concat(s.slice(r+1)))}else t.$set(t.tempCoupon,"is_enabled",i)}}}),t._v(" "),s("label",{staticClass:"form-check-label",attrs:{for:"is_enabled"}},[t._v("\n                                        是否啟用\n                                    ")])])])])])]),t._v(" "),s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("取消")]),t._v(" "),s("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.updateCoupon}},[t._v("確認")])])])])]),t._v(" "),s("div",{staticClass:"modal fade",attrs:{id:"delCouponModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[s("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[s("div",{staticClass:"modal-content border-0"},[s("div",{staticClass:"modal-header bg-danger text-white"},[s("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[s("span",[t._v("刪除優惠券 - "+t._s(t.tempCoupon.title)+" ")])]),t._v(" "),t._m(2)]),t._v(" "),s("div",{staticClass:"modal-body"},[t._v("\n                    是否刪除 "),s("strong",{staticClass:"text-danger"},[t._v(t._s(t.tempCoupon.title))]),t._v(" 商品(刪除後將無法恢復)。\n                ")]),t._v(" "),s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("取消")]),t._v(" "),s("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(a){return a.preventDefault(),t.deleteProduct(a)}}},[t._v("確認刪除")])])])])])],1)},staticRenderFns:[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("thead",[s("tr",[s("th",[t._v("名稱")]),t._v(" "),s("th",{attrs:{width:"120"}},[t._v("折扣百分比")]),t._v(" "),s("th",{attrs:{width:"120"}},[t._v("到期日")]),t._v(" "),s("th",{attrs:{width:"120"}},[t._v("是否啟用")]),t._v(" "),s("th",{attrs:{width:"80"}},[t._v("編輯")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])}]},W=s("VU/8")(H,B,!1,null,null,null).exports,X={data:function(){return{}},methods:{getCart:function(){this.$store.dispatch("getCart")}},computed:{cartData:function(){return this.$store.state.cartData}},watch:{cartData:function(){console.log("cartData",this.cartData.carts.length),E()("#cart").attr("cartCount",this.cartData.carts.length)}},created:function(){this.getCart()}},Q={render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[s("header",[s("div",{staticClass:"container"},[s("div",{staticClass:"topbar"},[s("router-link",{staticClass:"logo",attrs:{to:"/"}},[s("h1",[t._v("GameBase")])]),t._v(" "),s("router-link",{staticClass:"cart",attrs:{to:"/cart",id:"cart"}},[s("i",{staticClass:"fas fa-shopping-cart"})])],1)]),t._v(" "),s("nav",{staticClass:"navbar"},[s("div",{staticClass:"container"},[s("input",{attrs:{id:"show-menu",type:"checkbox",name:""}}),t._v(" "),t._m(0),t._v(" "),s("ul",{staticClass:"navbar-nav"},[s("li",[s("router-link",{attrs:{to:"/"}},[t._v("首頁")])],1),t._v(" "),s("li",[s("router-link",{attrs:{to:"/products"}},[t._v("遊戲列表")])],1)])])])])])},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("label",{attrs:{for:"show-menu"}},[a("span",{staticClass:"icon-bar"}),a("span",{staticClass:"icon-bar"}),a("span",{staticClass:"icon-bar"})])}]};var Y={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",[a("p",{staticClass:"text-white text-center p-5"},[this._v("2018 GameBase")])])}]},Z={components:{Navbar:s("VU/8")(X,Q,!1,function(t){s("0QnA")},null,null).exports,Footer:s("VU/8")({},Y,!1,null,null,null).exports},computed:{isLoading:function(){return this.$store.state.isLoading}}},J={render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[s("div",{staticClass:"wrap"},[s("loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}}),t._v(" "),s("header",[s("Navbar")],1),t._v(" "),s("main",[s("router-view")],1),t._v(" "),s("footer",[s("Footer")],1)],1)])},staticRenderFns:[]},K=s("VU/8")(Z,J,!1,null,null,null).exports,tt={data:function(){return{}},methods:{getProducts:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.$store.dispatch("getProducts")},addToCart:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.$store.dispatch("addToCart",{id:t,qty:a})},closeModal:function(){this.isShowModal&&this.$store.dispatch("updateIsShowModal",!1)}},watch:{isShowModal:function(){this.isShowModal&&E()("#messageModal").modal("show")}},computed:{products:function(){return this.$store.state.products},isShowModal:function(){return this.$store.state.isShowModal}},created:function(){this.getProducts()}},at={render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[s("div",{staticClass:"home my-5"},[t._m(0),t._v(" "),s("div",{staticClass:"container mt-5 mb-3"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-4"},[s("router-link",{staticClass:"category",attrs:{to:{name:"Products",query:{category:"PS4"}}}},[s("div",{staticClass:"category-body"}),t._v(" "),s("div",{staticClass:"category-footer"},[s("span",{staticClass:"mr-3"},[t._v("PS4")]),t._v(" "),s("i",{staticClass:"far fa-arrow-alt-circle-right"})])])],1),t._v(" "),s("div",{staticClass:"col-md-4"},[s("router-link",{staticClass:"category",attrs:{to:{name:"Products",query:{category:"PC"}}}},[s("div",{staticClass:"category-body",staticStyle:{"background-image":"url(https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ963tnmsT2T9odoRTDRwERpdsqwiTNDvsjPlRsCiGysz5NHNqh)"}}),t._v(" "),s("div",{staticClass:"category-footer"},[s("span",{staticClass:"mr-3"},[t._v("PC")]),t._v(" "),s("i",{staticClass:"far fa-arrow-alt-circle-right"})])])],1),t._v(" "),s("div",{staticClass:"col-md-4"},[s("router-link",{staticClass:"category",attrs:{to:{name:"Products",query:{category:"懷舊遊戲"}}}},[s("div",{staticClass:"category-body",staticStyle:{"background-image":"url(https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTmtwRPddxvLikBBps8HtmIMO7N7iPsaipCVSH6oV8VQpXqcbO_PQ)"}}),t._v(" "),s("div",{staticClass:"category-footer"},[s("span",{staticClass:"mr-3"},[t._v("懷舊小遊戲")]),s("i",{staticClass:"far fa-arrow-alt-circle-right"})])])],1),t._v(" "),s("div",{staticClass:"col-md-4"},[s("router-link",{staticClass:"category",attrs:{to:{name:"Products",query:{category:"恐怖遊戲"}}}},[s("div",{staticClass:"category-body",staticStyle:{"background-image":"url(https://steamcdn-a.akamaihd.net/steam/apps/414700/header.jpg?t=1494442005)"}}),t._v(" "),s("div",{staticClass:"category-footer"},[s("span",{staticClass:"mr-3"},[t._v("恐怖遊戲")]),s("i",{staticClass:"far fa-arrow-alt-circle-right"})])])],1),t._v(" "),s("div",{staticClass:"col-md-4"},[s("router-link",{staticClass:"category",attrs:{to:{name:"Products",query:{category:"經典遊戲"}}}},[s("div",{staticClass:"category-body",staticStyle:{"background-image":"url(https://cdn.images.dailystar.co.uk/dynamic/184/photos/397000/620x/Final-Fantasy-7-Remake-Release-Date-PS4-gameplay-trailer-story-and-E3-2018-news-updates-663026.jpg)"}}),t._v(" "),s("div",{staticClass:"category-footer"},[s("span",{staticClass:"mr-3"},[t._v("經典遊戲")]),s("i",{staticClass:"far fa-arrow-alt-circle-right"})])])],1),t._v(" "),s("div",{staticClass:"col-md-4"},[s("router-link",{staticClass:"category",attrs:{to:{name:"Products",query:{category:"近期發售"}}}},[s("div",{staticClass:"category-body",staticStyle:{"background-image":"url(https://ksassets.timeincuk.net/wp/uploads/sites/54/2018/08/Res-Evil-2-key-art-Gamescom-01-920x475.jpg)"}}),t._v(" "),s("div",{staticClass:"category-footer"},[s("span",{staticClass:"mr-3"},[t._v("近期發售")]),s("i",{staticClass:"far fa-arrow-alt-circle-right"})])])],1)])]),t._v(" "),s("div",{staticClass:"container"},[s("h2",{staticClass:"mb-0 featured-title"},[t._v("熱門銷售")]),t._v(" "),s("div",{staticClass:"row mt-4 mb-5"},t._l(t.products,function(a,e){return e<3?s("div",{key:a.id,staticClass:"col-md-4"},[s("div",{staticClass:"product"},[s("div",{staticClass:"product-body",style:{backgroundImage:"url("+a.imageUrl+")"}}),t._v(" "),s("div",{staticClass:"product-info"},[s("router-link",{staticClass:"product-info-title",attrs:{to:{name:"ProductDetail",params:{id:a.id}}}},[t._v("\n                                "+t._s(a.title)+"\n                            ")]),t._v(" "),s("div",{staticClass:"product-price"},[a.price?[s("span",{staticClass:"money"},[t._v(t._s(t._f("currency")(a.price)))]),t._v(" "),s("span",{staticClass:"origin-money"},[t._v(t._s(t._f("currency")(a.origin_price)))])]:[s("span",{staticClass:"money"},[t._v(t._s(t._f("currency")(a.origin_price)))])]],2),t._v(" "),s("button",{staticClass:"btn add-to-cart-btn",on:{click:function(s){s.preventDefault(),t.addToCart(a.id)}}},[s("span",{staticClass:"mr-3"},[t._v("加入購物車")]),t._v(" "),s("i",{staticClass:"far fa-arrow-alt-circle-right"})])],1)])]):t._e()})),t._v(" "),s("router-link",{staticClass:"btn see-more-product-btn",attrs:{to:"/products"}},[t._v("\n                看更多遊戲 ....\n            ")])],1)]),t._v(" "),s("div",{staticClass:"modal fade",attrs:{id:"messageModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[s("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[s("div",{staticClass:"modal-content"},[t._m(1),t._v(" "),s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"},on:{click:t.closeModal}},[t._v("關閉")])])])])])])},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("div",{staticClass:"carousel slide",attrs:{id:"carouselExampleSlides2","data-ride":"carousel"}},[a("ol",{staticClass:"carousel-indicators"},[a("li",{staticClass:"active",attrs:{"data-target":"#carouselExampleSlides2","data-slide-to":"0"}}),this._v(" "),a("li",{attrs:{"data-target":"#carouselExampleSlides2","data-slide-to":"1"}}),this._v(" "),a("li",{attrs:{"data-target":"#carouselExampleSlides2","data-slide-to":"2"}})]),this._v(" "),a("div",{staticClass:"carousel-inner"},[a("div",{staticClass:"carousel-item active"},[a("img",{staticClass:"d-block w-100",attrs:{src:"https://ksassets.timeincuk.net/wp/uploads/sites/54/2018/08/Res-Evil-2-key-art-Gamescom-01-920x475.jpg",alt:"First slide"}})]),this._v(" "),a("div",{staticClass:"carousel-item"},[a("img",{staticClass:"d-block w-100",attrs:{src:"https://img.4gamers.com.tw/ckfinder/images/Zizi/Game/20160811-yakuza6prologue6.png",alt:"Second slide"}})]),this._v(" "),a("div",{staticClass:"carousel-item"},[a("img",{staticClass:"d-block w-100",attrs:{src:"https://i.ytimg.com/vi/fZRjVHlLbXQ/maxresdefault.jpg",alt:"Third slide"}})])]),a("a",{staticClass:"carousel-control-prev",attrs:{href:"#carouselExampleSlides2",role:"button","data-slide":"prev"}},[a("span",{staticClass:"carousel-control-prev-icon",attrs:{"aria-hidden":"true"}}),a("span",{staticClass:"sr-only"},[this._v("Previous")])]),a("a",{staticClass:"carousel-control-next",attrs:{href:"#carouselExampleSlides2",role:"button","data-slide":"next"}},[a("span",{staticClass:"carousel-control-next-icon",attrs:{"aria-hidden":"true"}}),a("span",{staticClass:"sr-only"},[this._v("Next")])])])])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[this._v("您的物品已經加入購物車")]),this._v(" "),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])])}]},st=s("VU/8")(tt,at,!1,null,null,null).exports,et=s("lHA8"),it=s.n(et),rt={data:function(){return{isLoading:!1,filter:""}},methods:{getProducts:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.$store.dispatch("getProducts")},addToCart:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.$store.dispatch("addToCart",{id:t,qty:a})},closeModal:function(){this.isShowModal&&this.$store.dispatch("updateIsShowModal",!1)}},computed:{products:function(){return this.$store.state.products},categories:function(){new it.a;return this.products.reduce(function(t,a){var s=a.category;return t.hasOwnProperty(s)?t[s]++:t[s]=1,t},{})},filterdProducts:function(){var t=this;return""===t.filter?t.products:t.products.filter(function(a,s,e){return a.category===t.filter})},isShowModal:function(){return this.$store.state.isShowModal}},watch:{isShowModal:function(){this.isShowModal&&E()("#messageModal").modal("show")}},created:function(){this.getProducts(),this.filter=this.$route.query.category||""}},ot={render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[s("div",{staticClass:"products my-5"},[s("loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}}),t._v(" "),s("div",{staticClass:"container"},[s("nav",{attrs:{"aria-label":"breadcrumb"}},[s("ol",{staticClass:"breadcrumb custom-breadcrumb"},[s("li",{staticClass:"breadcrumb-item"},[s("router-link",{attrs:{to:"/"}},[t._v("首頁")])],1),t._v(" "),s("li",{staticClass:"breadcrumb-item"},[t._v("\n                        產品列表\n                    ")])])]),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-10"},[s("div",{staticClass:"row"},[t._l(t.filterdProducts,function(a){return s("div",{key:a.id,staticClass:"col-md-4"},[s("div",{staticClass:"product"},[s("div",{staticClass:"product-body",style:"background-image: url("+a.imageUrl+")"}),t._v(" "),s("div",{staticClass:"product-info"},[s("router-link",{staticClass:"product-info-title",attrs:{to:{name:"ProductDetail",params:{id:a.id}}}},[t._v("\n                                        "+t._s(a.title)+"\n                                    ")]),t._v(" "),s("div",{staticClass:"product-price"},[a.price?[s("span",{staticClass:"money"},[t._v(t._s(t._f("currency")(a.price)))]),t._v(" "),s("span",{staticClass:"origin-money"},[t._v(t._s(t._f("currency")(a.origin_price)))])]:[s("span",{staticClass:"money"},[t._v(t._s(t._f("currency")(a.origin_price)))])]],2),t._v(" "),s("a",{staticClass:"btn add-to-cart-btn",attrs:{href:"#"},on:{click:function(s){s.preventDefault(),t.addToCart(a.id)}}},[s("span",{staticClass:"mr-3"},[t._v("加入購物車")]),t._v(" "),s("i",{staticClass:"far fa-arrow-alt-circle-right"})])],1)])])}),t._v(" "),s("div",{staticClass:"col-12"})],2)]),t._v(" "),s("div",{staticClass:"col-md-2 sidebar"},[s("h2",{staticClass:"category-title"},[t._v("產品分類")]),t._v(" "),s("ul",{staticClass:"category-list list-unstyled"},[s("li",{staticClass:"category-item"},[s("a",{class:{active:""==t.filter},attrs:{href:"#"},on:{click:function(a){a.preventDefault(),t.filter=""}}},[t._v("全部")])]),t._v(" "),t._l(t.categories,function(a,e,i){return s("li",{key:i,staticClass:"category-item"},[s("a",{class:{active:t.filter==e},attrs:{href:"#"},on:{click:function(a){a.preventDefault(),t.filter=e}}},[t._v(t._s(e)+" ("+t._s(a)+")")])])})],2)])])])],1),t._v(" "),s("div",{staticClass:"modal fade",attrs:{id:"messageModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[s("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[s("div",{staticClass:"modal-content"},[t._m(0),t._v(" "),s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"},on:{click:function(a){return a.preventDefault(),t.closeModal(a)}}},[t._v("關閉")])])])])])])},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[this._v("您的物品已經加入購物車")]),this._v(" "),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])])}]},nt=s("VU/8")(rt,ot,!1,null,null,null).exports,lt={data:function(){return{productId:"",products:[],product:{num:1},form:{qty:""},isLoading:!1}},methods:{getProduct:function(){var t=this,a="https://vue-course-api.hexschool.io/api/cos214159/product/"+t.productId;t.isLoading=!0,this.$http.get(a).then(function(a){console.log(a.data),t.isLoading=!1,t.product=a.data.product})},getProducts:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t=this;t.isLoading=!0,this.$http.get("https://vue-course-api.hexschool.io/api/cos214159/products/all").then(function(a){console.log(a.data),t.isLoading=!1,t.products=a.data.products})},addToCart:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,s=this;s.isLoading=!0;var e={product_id:t,qty:a};this.$http.post("https://vue-course-api.hexschool.io/api/cos214159/cart",{data:e}).then(function(t){console.log(t.data),s.isLoading=!1,E()("#messageModal").modal("show")})}},computed:{categories:function(){new it.a;return this.products.reduce(function(t,a){var s=a.category;return t.hasOwnProperty(s)?t[s]++:t[s]=1,t},{})}},created:function(){this.productId=this.$route.params.id,this.getProducts(),this.getProduct(),console.log(this.productId)}},ct={render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[s("div",{staticClass:"product-detail my-5"},[s("loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}}),t._v(" "),s("div",{staticClass:"container"},[s("nav",{attrs:{"aria-label":"breadcrumb"}},[s("ol",{staticClass:"breadcrumb custom-breadcrumb"},[s("li",{staticClass:"breadcrumb-item"},[s("router-link",{attrs:{to:"/"}},[t._v("首頁")])],1),t._v(" "),s("li",{staticClass:"breadcrumb-item"},[s("router-link",{attrs:{to:"/products"}},[t._v("遊戲列表")])],1),t._v(" "),s("li",{staticClass:"breadcrumb-item"},[t._v("\n                        "+t._s(t.product.title)+"\n                    ")])])]),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-9"},[s("div",{staticClass:"product-panel"},[s("div",{staticClass:"product-img",style:{backgroundImage:"url("+t.product.imageUrl+")"},attrs:{alt:""}}),t._v(" "),s("div",{staticClass:"product-info"},[s("div",{staticClass:"product-title"},[t._v(t._s(t.product.title))]),t._v(" "),s("div",{staticClass:"product-price"},[t.product.price?[s("span",{staticClass:"money"},[t._v(t._s(t._f("currency")(t.product.price)))]),t._v(" "),s("span",{staticClass:"origin-money"},[t._v(t._s(t._f("currency")(t.product.origin_price)))])]:[s("span",{staticClass:"money"},[t._v(t._s(t._f("currency")(t.product.origin_price)))])]],2),t._v(" "),s("div",{staticClass:"product-qty"},[s("span",[t._v("購買數量")]),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.form.qty,expression:"form.qty"}],staticClass:"form-control product-qty-select",attrs:{autocomplete:"off"},on:{change:function(a){var s=Array.prototype.filter.call(a.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.form,"qty",a.target.multiple?s:s[0])}}},[s("option",{attrs:{value:"",selected:""}},[t._v("請選擇數量")]),t._v(" "),t._l(10,function(a){return s("option",{key:a,domProps:{value:a}},[t._v("\n                                        選購 "+t._s(a)+" "+t._s(t.product.unit)+"  \n                                    ")])})],2)]),t._v(" "),s("button",{staticClass:"btn add-to-cart-btn",on:{click:function(a){a.preventDefault(),t.addToCart(t.product.id,t.product.num)}}},[s("span",{staticClass:"mr-3"},[t._v("加入購物車")])]),t._v(" "),s("div",{staticClass:"product-content"},[s("p",[t._v(t._s(t.product.description))])])])])]),t._v(" "),s("div",{staticClass:"col-md-3 sidebar"},[s("h2",{staticClass:"category-title"},[t._v("產品分類")]),t._v(" "),s("ul",{staticClass:"category-list list-unstyled"},[t._m(0),t._v(" "),t._l(t.categories,function(a,e,i){return s("li",{key:i,staticClass:"category-item"},[s("router-link",{staticClass:"product-info-title",attrs:{to:"/products"}},[t._v("\n                                "+t._s(e)+" ("+t._s(a)+")\n                            ")])],1)})],2)])])])],1),t._v(" "),t._m(1)])},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("li",{staticClass:"category-item"},[a("a",{attrs:{href:"#"}},[this._v("全部")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"modal fade",attrs:{id:"messageModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[this._v("您的物品已經加入購物車")]),this._v(" "),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])]),this._v(" "),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[this._v("關閉")])])])])])}]},dt=s("VU/8")(lt,ct,!1,null,null,null).exports,ut={data:function(){return{cartData:{carts:[]},coupon_code:"",message:{title:""}}},methods:{getCart:function(){var t=this;t.isLoading=!0,this.$http.get("https://vue-course-api.hexschool.io/api/cos214159/cart").then(function(a){console.log(a.data),t.isLoading=!1,t.cartData=a.data.data})},removeCartItem:function(t){this.$store.dispatch("removeCartItem",t)},addCouponCode:function(){console.log("coupon");var t=this;t.isLoading=!0;var a={code:t.coupon_code};this.$http.post("https://vue-course-api.hexschool.io/api/cos214159/coupon",{data:a}).then(function(a){console.log(a.data),t.isLoading=!1,a.data.success?(t.message.title="已成功使用優惠卷",E()("#messageModal").modal("show")):(t.message.title=a.data.message,E()("#messageModal").modal("show")),t.getCart()})}},computed:{},created:function(){this.getCart()}},vt={render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[s("div",{staticClass:"cart my-5"},[s("div",{staticClass:"container"},[s("nav",{attrs:{"aria-label":"breadcrumb"}},[s("ol",{staticClass:"breadcrumb custom-breadcrumb"},[s("li",{staticClass:"breadcrumb-item"},[s("router-link",{attrs:{to:"/"}},[t._v("首頁")])],1),t._v(" "),s("li",{staticClass:"breadcrumb-item"},[t._v("\n                        購物車\n                    ")])])]),t._v(" "),0==t.cartData.carts.length?s("div",{staticClass:"cart-empty"},[s("p",{staticClass:"text-white"},[t._v("目前您的購物車沒有東西")])]):s("div",{staticClass:"row"},[s("div",{staticClass:"col-lg-8"},[s("ul",{staticClass:"cart-list list-unstyled"},t._l(t.cartData.carts,function(a){return s("li",{key:a.id,staticClass:"cart-item"},[s("div",{staticClass:"cart-item-img",style:{backgroundImage:"url("+a.product.imageUrl+")"}}),t._v(" "),s("div",{staticClass:"cart-item-info"},[s("div",{staticClass:"cart-item-bar cart-item-border-bottom pb-3"},[s("div",{staticClass:"cart-item-title"},[t._v(t._s(a.product.title))]),t._v(" "),s("a",{staticClass:"cart-item-delete",attrs:{href:"#"},on:{click:function(s){s.preventDefault(),t.removeCartItem(a.id)}}},[s("i",{staticClass:"fas fa-trash"})])]),t._v(" "),s("div",{staticClass:"cart-item-bar"},[s("div",{staticClass:"cart-item-title"},[t._v(t._s(a.product.category))])]),t._v(" "),s("div",{staticClass:"cart-item-bar"},[s("div",{staticClass:"cart-item-price"},[t._v(t._s(t._f("currency")(a.product.price)))]),t._v(" "),s("div",{staticClass:"cart-item-count"},[s("span",[t._v("數量 "+t._s(a.qty)+" 個")])])]),t._v(" "),s("div",{staticClass:"cart-item-bar ml-auto"},[s("div",{staticClass:"cart-item-price"},[t._v(t._s(t._f("currency")(a.final_total)))])])])])}))]),t._v(" "),s("div",{staticClass:"col-lg-4"},[s("div",{staticClass:"item-panel"},[s("div",{staticClass:"item-panel-header"},[t._v("購物金額")]),t._v(" "),s("div",{staticClass:"item-panel-body"},[s("div",{staticClass:"d-flex justify-content-between mb-3"},[s("span",[t._v("小計")]),s("span",[t._v(t._s(t._f("currency")(t.cartData.total)))])]),t._v(" "),s("div",{staticClass:"d-flex justify-content-between"},[s("span",{staticClass:"font-weight-bold"},[t._v("總金額")]),t._v(" "),s("span",{staticClass:"font-weight-bold",class:{"line-through":t.cartData.total!==t.cartData.final_total}},[t._v(t._s(t._f("currency")(t.cartData.total)))])]),t._v(" "),t.cartData.total!==t.cartData.final_total?s("div",{staticClass:"d-flex justify-content-between mt-3"},[s("span",{staticClass:"font-weight-bold text-success"},[t._v("折扣")]),t._v(" "),s("span",{staticClass:"font-weight-bold text-success"},[t._v(t._s(t._f("currency")(t.cartData.final_total)))])]):t._e()]),t._v(" "),s("div",{staticClass:"item-panel-footer"},[s("div",{staticClass:"input-group mb-4"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.coupon_code,expression:"coupon_code"}],staticClass:"form-control",attrs:{placeholder:"請輸入優惠碼"},domProps:{value:t.coupon_code},on:{input:function(a){a.target.composing||(t.coupon_code=a.target.value)}}}),t._v(" "),s("button",{staticClass:"btn coupon-btn",on:{click:function(a){return a.preventDefault(),t.addCouponCode(a)}}},[t._v("套用優惠碼")])]),t._v(" "),s("router-link",{staticClass:"btn add-to-cart-btn mb-0",attrs:{to:"/checkout_order"}},[t._v("結帳去")])],1)])])])])]),t._v(" "),s("div",{staticClass:"modal fade",attrs:{id:"messageModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[s("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[s("div",{staticClass:"modal-content"},[s("div",{staticClass:"modal-header"},[s("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t._v(t._s(t.message.title))]),t._v(" "),t._m(0)]),t._v(" "),t._m(1)])])])])},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[this._v("關閉")])])}]};var pt=s("VU/8")(ut,vt,!1,function(t){s("w2kU")},null,null).exports,mt={data:function(){return{form:{user:{name:"",email:"",tel:"",address:""},message:""},isLoading:!1,cartData:{carts:[]}}},methods:{createOrder:function(){var t=this,a=this;a.isLoading=!0,this.$validator.validate().then(function(s){if(s){var e=a.form;t.$http.post("https://vue-course-api.hexschool.io/api/cos214159/order",{data:e}).then(function(s){s.data.success&&(t.$store.dispatch("getCart"),a.$router.push("/checkout_pay/"+s.data.orderId)),console.log("訂單已建立",s.data),a.isLoading=!1})}else a.isLoading=!1,console.log("欄位不完整")})},getCart:function(){var t=this;t.isLoading=!0,this.$http.get("https://vue-course-api.hexschool.io/api/cos214159/cart").then(function(a){console.log(a.data),t.isLoading=!1,t.cartData=a.data.data})}},computed:{},created:function(){this.getCart()}},_t={render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[s("div",{staticClass:"checkout my-5"},[s("div",{staticClass:"container"},[s("nav",{attrs:{"aria-label":"breadcrumb"}},[s("ol",{staticClass:"breadcrumb custom-breadcrumb"},[s("li",{staticClass:"breadcrumb-item"},[s("router-link",{attrs:{to:"/"}},[t._v("首頁")])],1),t._v(" "),s("li",{staticClass:"breadcrumb-item"},[s("router-link",{attrs:{to:"/cart"}},[t._v("購物車")])],1),t._v(" "),s("li",{staticClass:"breadcrumb-item"},[t._v("\n                        建立訂單\n                    ")])])]),t._v(" "),s("div",{staticClass:"row"},[s("loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}}),t._v(" "),s("div",{staticClass:"col-md-8"},[s("form",{staticClass:"p-4",staticStyle:{background:"#444444"},on:{submit:function(a){return a.preventDefault(),t.createOrder(a)}}},[s("div",{staticClass:"form-group"},[s("label",{staticClass:"text-white",attrs:{for:"email"}},[t._v("email")]),t._v(" "),s("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"},{name:"model",rawName:"v-model",value:t.form.user.email,expression:"form.user.email"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("email")},attrs:{id:"email",type:"email",name:"email",placeholder:"請輸入 email"},domProps:{value:t.form.user.email},on:{input:function(a){a.target.composing||t.$set(t.form.user,"email",a.target.value)}}}),t._v(" "),t.errors.has("email")?s("span",{staticClass:"text-danger"},[t._v("\n                                "+t._s(t.errors.first("email"))+"\n                            ")]):t._e()]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{staticClass:"text-white",attrs:{for:"name"}},[t._v("收件人姓名")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.name,expression:"form.user.name"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("name")},attrs:{id:"name",type:"text",name:"name",placeholder:"請輸入姓名"},domProps:{value:t.form.user.name},on:{input:function(a){a.target.composing||t.$set(t.form.user,"name",a.target.value)}}}),t._v(" "),t.errors.has("name")?s("span",{staticClass:"text-danger"},[t._v("姓名必須輸入")]):t._e()]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{staticClass:"text-white",attrs:{for:"tel"}},[t._v("收件人電話")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.tel,expression:"form.user.tel"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("tel")},attrs:{id:"tel",type:"tel",name:"tel",placeholder:"請輸入電話"},domProps:{value:t.form.user.tel},on:{input:function(a){a.target.composing||t.$set(t.form.user,"tel",a.target.value)}}}),t._v(" "),t.errors.has("tel")?s("span",{staticClass:"text-danger"},[t._v("\n                                請輸入收件人電話\n                            ")]):t._e()]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{staticClass:"text-white",attrs:{for:"address"}},[t._v("收件人地址")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.address,expression:"form.user.address"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("address")},attrs:{id:"address",type:"text",name:"address",placeholder:"請輸入地址"},domProps:{value:t.form.user.address},on:{input:function(a){a.target.composing||t.$set(t.form.user,"address",a.target.value)}}}),t._v(" "),t.errors.has("address")?s("span",{staticClass:"text-danger"},[t._v("\n                                請輸入收件人地址\n                            ")]):t._e()]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{staticClass:"text-white",attrs:{for:"comment"}},[t._v("留言")]),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.message,expression:"form.message"}],staticClass:"form-control",attrs:{id:"comment",name:"comment",rows:"5"},domProps:{value:t.form.message},on:{input:function(a){a.target.composing||t.$set(t.form,"message",a.target.value)}}})]),t._v(" "),s("button",{staticClass:"btn add-to-cart-btn"},[t._v("送出訂單")])])]),t._v(" "),s("div",{staticClass:"col-md-4 mt-2 mt-md-0"},[s("div",{staticClass:"item-panel"},[s("div",{staticClass:"item-panel-header"},[t._v("購物金額")]),t._v(" "),s("div",{staticClass:"item-panel-body"},[t.cartData.total?[s("div",{staticClass:"d-flex justify-content-between mb-3"},[s("span",[t._v("小計")]),s("span",[t._v(t._s(t._f("currency")(t.cartData.total)))])]),t._v(" "),s("div",{staticClass:"d-flex justify-content-between"},[s("span",{staticClass:"font-weight-bold"},[t._v("總金額")]),t._v(" "),s("span",{staticClass:"font-weight-bold",class:{"line-through":t.cartData.total!==t.cartData.final_total}},[t._v(t._s(t._f("currency")(t.cartData.total)))])]),t._v(" "),t.cartData.total!==t.cartData.final_total?s("div",{staticClass:"d-flex justify-content-between mt-3"},[s("span",{staticClass:"font-weight-bold text-success"},[t._v("折扣")]),t._v(" "),s("span",{staticClass:"font-weight-bold text-success"},[t._v(t._s(t._f("currency")(t.cartData.final_total)))])]):t._e()]:t._e()],2)])])],1)])])])},staticRenderFns:[]},ht=s("VU/8")(mt,_t,!1,null,null,null).exports,gt={data:function(){return{orderId:"",cartData:{carts:[]},isLoading:!1,order:{}}},methods:{getOrder:function(){var t=this,a="https://vue-course-api.hexschool.io/api/cos214159/order/"+t.orderId;t.isLoading=!0,this.$http.get(a).then(function(a){console.log(a.data),t.isLoading=!1,t.order=a.data.order})},getProduct:function(t){var a="https://vue-course-api.hexschool.io/api/cos214159/product/"+t;this.$http.get(a).then(function(t){return t.data.product})},payOrder:function(){var t=this,a="https://vue-course-api.hexschool.io/api/cos214159/pay/"+t.orderId;t.isLoading=!0,this.$http.post(a).then(function(a){console.log(a.data),t.isLoading=!1,t.getOrder()})}},created:function(){this.orderId=this.$route.params.order_id,console.log(this.orderId),this.getOrder()}},ft={render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[s("div",{staticClass:"checkout"},[s("loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}}),t._v(" "),s("div",{staticClass:"container"},[s("div",{staticClass:"row mt-5 justify-content-center"},[s("div",{staticClass:"col-md-10"},[s("nav",{attrs:{"aria-label":"breadcrumb"}},[s("ol",{staticClass:"breadcrumb custom-breadcrumb"},[s("li",{staticClass:"breadcrumb-item"},[s("router-link",{attrs:{to:"/"}},[t._v("首頁")])],1),t._v(" "),s("li",{staticClass:"breadcrumb-item"},[s("router-link",{attrs:{to:"/cart"}},[t._v("購物車")])],1),t._v(" "),s("li",{staticClass:"breadcrumb-item"},[t._v("\n                                結帳\n                            ")])])]),t._v(" "),s("div",{staticClass:"accordion mb-3",attrs:{id:"accordionExample"}},[s("div",{staticClass:"card border-0 "},[t._m(0),t._v(" "),s("div",{staticClass:"collapse show",attrs:{id:"collapseOne","aria-labelledby":"headingOne","data-parent":"#accordionExample"}},[s("div",{staticClass:"card-body bg-body"},[s("table",{staticClass:"table"},[t._m(1),t._v(" "),s("tbody",[t._l(t.order.products,function(a){return s("tr",{key:a.id},[s("td",[t._v(t._s(a.product.title))]),t._v(" "),s("td",[t._v(t._s(a.qty)+"/"+t._s(a.product.unit))]),t._v(" "),s("td",[t._v(t._s(t._f("currency")(a.product.price)))])])}),t._v(" "),s("tr",[s("td",{staticClass:"text-right",attrs:{colspan:"2"}},[t._v("總計")]),t._v(" "),s("td",[t._v(t._s(t._f("currency")(t.order.total)))])])],2)])])])])]),t._v(" "),s("div",{staticClass:"card border-0 "},[s("div",{staticClass:"card-header bg-header rounded-0 text-white"},[t._v("\n                            填寫資料\n                        ")]),t._v(" "),s("div",{staticClass:"card-body bg-body"},[s("table",{staticClass:"table"},[s("tbody",[t.order.user?[s("tr",[s("th",{staticClass:"font-weight-bold",attrs:{width:"130"}},[t._v("Email")]),t._v(" "),s("td",{staticClass:"text-left"},[t._v(t._s(t.order.user.email))])]),t._v(" "),s("tr",[s("th",{staticClass:"font-weight-bold",attrs:{width:"130"}},[t._v("姓名")]),t._v(" "),s("td",{staticClass:"text-left"},[t._v(t._s(t.order.user.name))])]),t._v(" "),s("tr",[s("th",{staticClass:"font-weight-bold",attrs:{width:"130"}},[t._v("收件人電話")]),t._v(" "),s("td",{staticClass:"text-left"},[t._v(t._s(t.order.user.tel))])]),t._v(" "),s("tr",[s("th",{staticClass:"font-weight-bold",attrs:{width:"130"}},[t._v("收件人地址")]),t._v(" "),s("td",{staticClass:"text-left"},[t._v(t._s(t.order.user.address))])]),t._v(" "),s("tr",[s("th",{staticClass:"font-weight-bold",attrs:{width:"130"}},[t._v("付款狀態")]),t._v(" "),s("td",{staticClass:"text-left"},[t.order.is_paid?s("span",{staticClass:"text-success"},[t._v("已經付款")]):s("span",[t._v("尚未付款")])])])]:t._e()],2)])])]),t._v(" "),s("button",{staticClass:"btn mt-3 rounded-0 bg-success w-50",on:{click:function(a){return a.preventDefault(),t.payOrder(a)}}},[t._v("確認付款")])])])])],1)])},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"card-header bg-header rounded-0",attrs:{id:"headingOne"}},[a("h5",{staticClass:"mb-0"},[a("button",{staticClass:"btn btn-link p-0",attrs:{type:"button","data-toggle":"collapse","data-target":"#collapseOne","aria-expanded":"true","aria-controls":"collapseOne"}},[this._v("\n                                        購買清單\n                                    ")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[this._v("遊戲名稱")]),this._v(" "),a("th",{attrs:{scope:"col",width:"100"}},[this._v("數量")]),this._v(" "),a("th",{attrs:{scope:"col",width:"100"}},[this._v("單價")])])])}]},Ct=s("VU/8")(gt,ft,!1,null,null,null).exports;e.a.use(h.a);var bt=new h.a({routes:[{path:"*",redirect:"/home"},{path:"/login",name:"Login",component:C},{path:"/admin",name:"HelloWorld",component:j,meta:{requiresAuth:!0},children:[{path:"dashboard",name:"Dashboard",component:L,meta:{requiresAuth:!0}},{path:"products",name:"AdminProducts",component:R,meta:{requiresAuth:!0}},{path:"orders",name:"Orders",component:z,meta:{requiresAuth:!0}},{path:"coupon",name:"Coupon",component:W,meta:{requiresAuth:!0}}]},{path:"/",component:K,children:[{path:"",name:"Home",component:st},{path:"products",name:"Products",component:nt},{path:"product/:id",name:"ProductDetail",component:dt},{path:"cart",name:"Cart",component:pt},{path:"checkout_order",name:"FrontCheckoutOrder",component:ht},{path:"checkout_pay/:order_id",name:"FrontCheckoutPay",component:Ct}]}]});e.a.use(i.a);var yt=new i.a.Store({strict:!0,state:{isLoading:!1,products:[],cartData:{carts:[]},isShowModal:!1},actions:{updateLoading:function(t,a){t.commit("LOADING",a)},updateIsShowModal:function(t,a){t.commit("IS_SHOW_MODAL",a)},getProducts:function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];t.commit("LOADING",!0),o.a.get("https://vue-course-api.hexschool.io/api/cos214159/products/all").then(function(a){t.commit("LOADING",!1),t.commit("PRODUCTS",a.data.products)})},getCart:function(t){t.commit("LOADING",!0),o.a.get("https://vue-course-api.hexschool.io/api/cos214159/cart").then(function(a){console.log(a.data),t.commit("LOADING",!1),t.commit("CART",a.data.data)})},getCart1:function(t){t.commit("LOADING",!0),o.a.get("https://vue-course-api.hexschool.io/api/cos214159/cart").then(function(a){console.log(a.data),t.commit("LOADING",!1),t.commit("CART",a.data.data),t.commit("IS_SHOW_MODAL",!0)})},addToCart:function(t,a){var s=a.id,e=a.qty,i=void 0===e?1:e;t.commit("LOADING",!0);var r={product_id:s,qty:i};o.a.post("https://vue-course-api.hexschool.io/api/cos214159/cart",{data:r}).then(function(a){console.log(a.data),t.commit("LOADING",!1),t.dispatch("getCart1")})},removeCartItem:function(t,a){var s="https://vue-course-api.hexschool.io/api/cos214159/cart/"+a;t.commit("LOADING",!0),o.a.delete(s).then(function(a){console.log(a.data),t.commit("LOADING",!1),t.dispatch("getCart1")})}},mutations:{LOADING:function(t,a){t.isLoading=a},PRODUCTS:function(t,a){t.products=a},CART:function(t,a){t.cartData=a},IS_SHOW_MODAL:function(t,a){t.isShowModal=a}},getters:{}});e.a.prototype.$bus=new e.a;e.a.config.productionTip=!1,e.a.use(l.a,o.a),u.a.Validator.localize("zh_TW",p.a),e.a.use(u.a),e.a.use(i.a),e.a.use(s("8AgW")),e.a.component("Loading",d.a),e.a.filter("currency",function(t){return"$"+Number(t).toFixed(0).replace(/./g,function(t,a,s){return a&&"."!==t&&(s.length-a)%3==0?(", "+t).replace(/\s/g,""):t})}),o.a.defaults.withCredentials=!0,new e.a({el:"#app",router:bt,store:yt,components:{App:_},template:"<App/>"}),bt.beforeEach(function(t,a,s){if(t.meta.requiresAuth){o.a.post("https://vue-course-api.hexschool.io/api/user/check").then(function(t){console.log(t.data),t.data.success?s():s({path:"/login"})}),console.log("這裡需要驗證")}else s();console.log("to",t,"from",a,"next",s)})},SYh3:function(t,a){},XtTU:function(t,a){},iQ74:function(t,a){},uslO:function(t,a,s){var e={"./af":"3CJN","./af.js":"3CJN","./ar":"3MVc","./ar-dz":"tkWw","./ar-dz.js":"tkWw","./ar-kw":"j8cJ","./ar-kw.js":"j8cJ","./ar-ly":"wPpW","./ar-ly.js":"wPpW","./ar-ma":"dURR","./ar-ma.js":"dURR","./ar-sa":"7OnE","./ar-sa.js":"7OnE","./ar-tn":"BEem","./ar-tn.js":"BEem","./ar.js":"3MVc","./az":"eHwN","./az.js":"eHwN","./be":"3hfc","./be.js":"3hfc","./bg":"lOED","./bg.js":"lOED","./bm":"hng5","./bm.js":"hng5","./bn":"aM0x","./bn.js":"aM0x","./bo":"w2Hs","./bo.js":"w2Hs","./br":"OSsP","./br.js":"OSsP","./bs":"aqvp","./bs.js":"aqvp","./ca":"wIgY","./ca.js":"wIgY","./cs":"ssxj","./cs.js":"ssxj","./cv":"N3vo","./cv.js":"N3vo","./cy":"ZFGz","./cy.js":"ZFGz","./da":"YBA/","./da.js":"YBA/","./de":"DOkx","./de-at":"8v14","./de-at.js":"8v14","./de-ch":"Frex","./de-ch.js":"Frex","./de.js":"DOkx","./dv":"rIuo","./dv.js":"rIuo","./el":"CFqe","./el.js":"CFqe","./en-au":"Sjoy","./en-au.js":"Sjoy","./en-ca":"Tqun","./en-ca.js":"Tqun","./en-gb":"hPuz","./en-gb.js":"hPuz","./en-ie":"ALEw","./en-ie.js":"ALEw","./en-il":"QZk1","./en-il.js":"QZk1","./en-nz":"dyB6","./en-nz.js":"dyB6","./eo":"Nd3h","./eo.js":"Nd3h","./es":"LT9G","./es-do":"7MHZ","./es-do.js":"7MHZ","./es-us":"INcR","./es-us.js":"INcR","./es.js":"LT9G","./et":"XlWM","./et.js":"XlWM","./eu":"sqLM","./eu.js":"sqLM","./fa":"2pmY","./fa.js":"2pmY","./fi":"nS2h","./fi.js":"nS2h","./fo":"OVPi","./fo.js":"OVPi","./fr":"tzHd","./fr-ca":"bXQP","./fr-ca.js":"bXQP","./fr-ch":"VK9h","./fr-ch.js":"VK9h","./fr.js":"tzHd","./fy":"g7KF","./fy.js":"g7KF","./gd":"nLOz","./gd.js":"nLOz","./gl":"FuaP","./gl.js":"FuaP","./gom-latn":"+27R","./gom-latn.js":"+27R","./gu":"rtsW","./gu.js":"rtsW","./he":"Nzt2","./he.js":"Nzt2","./hi":"ETHv","./hi.js":"ETHv","./hr":"V4qH","./hr.js":"V4qH","./hu":"xne+","./hu.js":"xne+","./hy-am":"GrS7","./hy-am.js":"GrS7","./id":"yRTJ","./id.js":"yRTJ","./is":"upln","./is.js":"upln","./it":"FKXc","./it.js":"FKXc","./ja":"ORgI","./ja.js":"ORgI","./jv":"JwiF","./jv.js":"JwiF","./ka":"RnJI","./ka.js":"RnJI","./kk":"j+vx","./kk.js":"j+vx","./km":"5j66","./km.js":"5j66","./kn":"gEQe","./kn.js":"gEQe","./ko":"eBB/","./ko.js":"eBB/","./ky":"6cf8","./ky.js":"6cf8","./lb":"z3hR","./lb.js":"z3hR","./lo":"nE8X","./lo.js":"nE8X","./lt":"/6P1","./lt.js":"/6P1","./lv":"jxEH","./lv.js":"jxEH","./me":"svD2","./me.js":"svD2","./mi":"gEU3","./mi.js":"gEU3","./mk":"Ab7C","./mk.js":"Ab7C","./ml":"oo1B","./ml.js":"oo1B","./mn":"CqHt","./mn.js":"CqHt","./mr":"5vPg","./mr.js":"5vPg","./ms":"ooba","./ms-my":"G++c","./ms-my.js":"G++c","./ms.js":"ooba","./mt":"oCzW","./mt.js":"oCzW","./my":"F+2e","./my.js":"F+2e","./nb":"FlzV","./nb.js":"FlzV","./ne":"/mhn","./ne.js":"/mhn","./nl":"3K28","./nl-be":"Bp2f","./nl-be.js":"Bp2f","./nl.js":"3K28","./nn":"C7av","./nn.js":"C7av","./pa-in":"pfs9","./pa-in.js":"pfs9","./pl":"7LV+","./pl.js":"7LV+","./pt":"ZoSI","./pt-br":"AoDM","./pt-br.js":"AoDM","./pt.js":"ZoSI","./ro":"wT5f","./ro.js":"wT5f","./ru":"ulq9","./ru.js":"ulq9","./sd":"fW1y","./sd.js":"fW1y","./se":"5Omq","./se.js":"5Omq","./si":"Lgqo","./si.js":"Lgqo","./sk":"OUMt","./sk.js":"OUMt","./sl":"2s1U","./sl.js":"2s1U","./sq":"V0td","./sq.js":"V0td","./sr":"f4W3","./sr-cyrl":"c1x4","./sr-cyrl.js":"c1x4","./sr.js":"f4W3","./ss":"7Q8x","./ss.js":"7Q8x","./sv":"Fpqq","./sv.js":"Fpqq","./sw":"DSXN","./sw.js":"DSXN","./ta":"+7/x","./ta.js":"+7/x","./te":"Nlnz","./te.js":"Nlnz","./tet":"gUgh","./tet.js":"gUgh","./tg":"5SNd","./tg.js":"5SNd","./th":"XzD+","./th.js":"XzD+","./tl-ph":"3LKG","./tl-ph.js":"3LKG","./tlh":"m7yE","./tlh.js":"m7yE","./tr":"k+5o","./tr.js":"k+5o","./tzl":"iNtv","./tzl.js":"iNtv","./tzm":"FRPF","./tzm-latn":"krPU","./tzm-latn.js":"krPU","./tzm.js":"FRPF","./ug-cn":"To0v","./ug-cn.js":"To0v","./uk":"ntHu","./uk.js":"ntHu","./ur":"uSe8","./ur.js":"uSe8","./uz":"XU1s","./uz-latn":"/bsm","./uz-latn.js":"/bsm","./uz.js":"XU1s","./vi":"0X8Q","./vi.js":"0X8Q","./x-pseudo":"e/KL","./x-pseudo.js":"e/KL","./yo":"YXlc","./yo.js":"YXlc","./zh-cn":"Vz2w","./zh-cn.js":"Vz2w","./zh-hk":"ZUyn","./zh-hk.js":"ZUyn","./zh-tw":"BbgG","./zh-tw.js":"BbgG"};function i(t){return s(r(t))}function r(t){var a=e[t];if(!(a+1))throw new Error("Cannot find module '"+t+"'.");return a}i.keys=function(){return Object.keys(e)},i.resolve=r,t.exports=i,i.id="uslO"},w2kU:function(t,a){}},["NHnr"]);
//# sourceMappingURL=app.57f6f592e73985586a34.js.map